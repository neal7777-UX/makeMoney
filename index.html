<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼‘é–’é¢¨å€‹äººè¨˜å¸³æœ¬</title>
    
    <!-- Tailwind CSS CDN -->
<script>
  window.__app_id = 'my-finance-app';
  window.__firebase_config = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  // å¯é¸ï¼šä½¿ç”¨ Custom Token
  // window.__initial_auth_token = "your-custom-token";
</script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, setDoc, doc, onSnapshot, query, orderBy, Timestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // ============================================
        // å…¨åŸŸè®Šæ•¸èˆ‡é…ç½®
        // ============================================
        const __app_id = window.__app_id || 'default-app';
        const __firebase_config = window.__firebase_config || {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        const __initial_auth_token = window.__initial_auth_token || null;

        // åˆå§‹åŒ– Firebase
        const app = initializeApp(__firebase_config);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;
        let userBasePath = null;

        // ============================================
        // èªè­‰æµç¨‹
        // ============================================
        async function authenticateUser() {
            try {
                if (__initial_auth_token) {
                    // ä½¿ç”¨ Custom Token ç™»å…¥
                    await signInWithCustomToken(auth, __initial_auth_token);
                    console.log('âœ“ ä½¿ç”¨ Custom Token ç™»å…¥æˆåŠŸ');
                } else {
                    // åŒ¿åç™»å…¥
                    await signInAnonymously(auth);
                    console.log('âœ“ åŒ¿åç™»å…¥æˆåŠŸ');
                }
            } catch (error) {
                console.error('èªè­‰å¤±æ•—:', error);
                showNotification('èªè­‰å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢', 'error');
            }
        }

        // ç›£è½èªè­‰ç‹€æ…‹
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                userBasePath = `artifacts/${__app_id}/users/${user.uid}`;
                console.log('âœ“ ç”¨æˆ¶å·²ç™»å…¥:', user.uid);
                initializeAppData();
            } else {
                console.log('âš  ç”¨æˆ¶æœªç™»å…¥ï¼Œå˜—è©¦èªè­‰...');
                authenticateUser();
            }
        });

        // ============================================
        // æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–
        // ============================================
        function initializeAppData() {
            // è¼‰å…¥ç¸½è³‡ç”¢
            loadTotalAssets();
            
            // è¼‰å…¥æœˆåº¦ç¸½è¦½èˆ‡äº¤æ˜“æ¸…å–®
            updateMonthlySummaryAndList();
            
            // é¡¯ç¤ºä¸»è¦å…§å®¹
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
        }

        // ============================================
        // ç¸½è³‡ç”¢ç®¡ç†
        // ============================================
        function loadTotalAssets() {
            const assetsRef = doc(db, `${userBasePath}/assets/main`);
            
            onSnapshot(assetsRef, (docSnap) => {
                const totalAssets = docSnap.exists() ? Number(docSnap.data().totalAssets || 0) : 0;
                document.getElementById('total-assets').textContent = formatCurrency(totalAssets);
            }, (error) => {
                console.error('è¼‰å…¥ç¸½è³‡ç”¢å¤±æ•—:', error);
            });
        }

        async function updateTotalAssets() {
            const input = document.getElementById('assets-input');
            const newAssets = Number(input.value);

            if (isNaN(newAssets) || newAssets < 0) {
                showNotification('è«‹è¼¸å…¥æœ‰æ•ˆçš„é‡‘é¡', 'error');
                return;
            }

            try {
                const assetsRef = doc(db, `${userBasePath}/assets/main`);
                await setDoc(assetsRef, {
                    totalAssets: newAssets,
                    lastUpdated: Timestamp.now()
                });
                
                showNotification('ç¸½è³‡ç”¢å·²æ›´æ–°', 'success');
                input.value = '';
            } catch (error) {
                console.error('æ›´æ–°ç¸½è³‡ç”¢å¤±æ•—:', error);
                showNotification('æ›´æ–°å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦', 'error');
            }
        }

        // ============================================
        // æ—¥å¸¸æ”¯å‡ºè¨˜éŒ„
        // ============================================
        async function addExpense() {
            const date = document.getElementById('expense-date').value;
            const amount = Number(document.getElementById('expense-amount').value);
            const category = document.getElementById('expense-category').value;
            const description = document.getElementById('expense-description').value;

            // é©—è­‰è¼¸å…¥
            if (!date || isNaN(amount) || amount <= 0 || !category) {
                showNotification('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½', 'error');
                return;
            }

            try {
                const expensesRef = collection(db, `${userBasePath}/expenses`);
                await addDoc(expensesRef, {
                    date: date,
                    amount: amount,
                    category: category,
                    description: description || '',
                    timestamp: Timestamp.now()
                });

                showNotification('æ”¯å‡ºå·²è¨˜éŒ„', 'success');
                
                // æ¸…ç©ºè¡¨å–®
                document.getElementById('expense-date').value = new Date().toISOString().split('T')[0];
                document.getElementById('expense-amount').value = '';
                document.getElementById('expense-category').value = 'é¤é£²';
                document.getElementById('expense-description').value = '';
            } catch (error) {
                console.error('æ–°å¢æ”¯å‡ºå¤±æ•—:', error);
                showNotification('æ–°å¢å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦', 'error');
            }
        }

        // ============================================
        // ä¿¡ç”¨å¡åˆ†æœŸè¿½è¹¤ï¼ˆé—œéµåŠŸèƒ½ï¼‰
        // ============================================
        async function addInstallment() {
            const totalAmount = Number(document.getElementById('installment-total').value);
            const periods = Number(document.getElementById('installment-periods').value);
            const startMonth = document.getElementById('installment-start').value;
            const category = document.getElementById('installment-category').value;
            const description = document.getElementById('installment-description').value;

            // åš´æ ¼é©—è­‰è¼¸å…¥
            if (isNaN(totalAmount) || totalAmount <= 0) {
                showNotification('è«‹è¼¸å…¥æœ‰æ•ˆçš„ç¸½é¡', 'error');
                return;
            }
            if (isNaN(periods) || periods <= 0 || !Number.isInteger(periods)) {
                showNotification('è«‹è¼¸å…¥æœ‰æ•ˆçš„æœŸæ•¸ï¼ˆæ­£æ•´æ•¸ï¼‰', 'error');
                return;
            }
            if (!startMonth || !category) {
                showNotification('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½', 'error');
                return;
            }

            // è¨ˆç®—æ¯æœˆæ”¤é‚„é‡‘é¡
            const monthlyPayment = totalAmount / periods;

            try {
                const installmentsRef = collection(db, `${userBasePath}/installments`);
                await addDoc(installmentsRef, {
                    totalAmount: totalAmount,
                    periods: periods,
                    startMonth: startMonth,
                    category: category,
                    description: description || '',
                    monthlyPayment: monthlyPayment,
                    timestamp: Timestamp.now()
                });

                showNotification('åˆ†æœŸè¨ˆç•«å·²æ–°å¢', 'success');
                
                // æ¸…ç©ºè¡¨å–®
                document.getElementById('installment-total').value = '';
                document.getElementById('installment-periods').value = '';
                document.getElementById('installment-start').value = '';
                document.getElementById('installment-category').value = 'é¤é£²';
                document.getElementById('installment-description').value = '';
            } catch (error) {
                console.error('æ–°å¢åˆ†æœŸè¨ˆç•«å¤±æ•—:', error);
                showNotification('æ–°å¢å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦', 'error');
            }
        }

        // ============================================
        // æœˆåº¦ç¸½è¦½èˆ‡äº¤æ˜“æ¸…å–®ï¼ˆå³æ™‚æ›´æ–°ï¼‰
        // ============================================
        function updateMonthlySummaryAndList() {
            const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM
            
            let monthlyExpenses = 0;
            let monthlyInstallments = 0;
            const transactionList = [];

            // ç›£è½æ—¥å¸¸æ”¯å‡º
            const expensesRef = collection(db, `${userBasePath}/expenses`);
            const expensesQuery = query(expensesRef, orderBy('timestamp', 'desc'));
            
            onSnapshot(expensesQuery, (snapshot) => {
                monthlyExpenses = 0;
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const expenseMonth = data.date.slice(0, 7);
                    const amount = Number(data.amount || 0);
                    
                    if (expenseMonth === currentMonth) {
                        monthlyExpenses += amount;
                    }
                    
                    // æ·»åŠ åˆ°äº¤æ˜“æ¸…å–®ï¼ˆæœ€è¿‘30ç­†ï¼‰
                    transactionList.push({
                        id: doc.id,
                        type: 'expense',
                        date: data.date,
                        amount: amount,
                        category: data.category,
                        description: data.description,
                        timestamp: data.timestamp
                    });
                });
                
                updateDashboard();
            });

            // ç›£è½åˆ†æœŸè¨ˆç•«ï¼ˆé—œéµï¼šç¢ºä¿æ•¸å­—é¡å‹è½‰æ›ï¼‰
            const installmentsRef = collection(db, `${userBasePath}/installments`);
            const installmentsQuery = query(installmentsRef, orderBy('timestamp', 'desc'));
            
            onSnapshot(installmentsQuery, (snapshot) => {
                monthlyInstallments = 0;
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    
                    // å¼·åˆ¶è½‰æ›ç‚ºæ•¸å­—é¡å‹ï¼ˆé˜²æ­¢è¨ˆç®—éŒ¯èª¤ï¼‰
                    const totalAmount = Number(data.totalAmount || 0);
                    const periods = Number(data.periods || 1);
                    const startMonth = data.startMonth;
                    const monthlyPayment = Number(data.monthlyPayment || (totalAmount / periods));
                    
                    // æª¢æŸ¥ç•¶å‰æœˆä»½æ˜¯å¦åœ¨åˆ†æœŸæ”¯ä»˜ç¯„åœå…§
                    if (isMonthInInstallmentRange(currentMonth, startMonth, periods)) {
                        monthlyInstallments += monthlyPayment;
                        
                        // æ·»åŠ åˆ°äº¤æ˜“æ¸…å–®
                        transactionList.push({
                            id: doc.id,
                            type: 'installment',
                            date: currentMonth + '-01',
                            amount: monthlyPayment,
                            category: data.category,
                            description: `${data.description} (åˆ†æœŸ ${periods} æœŸ)`,
                            timestamp: data.timestamp,
                            installmentInfo: {
                                totalAmount: totalAmount,
                                periods: periods,
                                startMonth: startMonth
                            }
                        });
                    }
                });
                
                updateDashboard();
            });

            // æ›´æ–°å„€è¡¨æ¿é¡¯ç¤º
            function updateDashboard() {
                document.getElementById('monthly-expenses').textContent = formatCurrency(monthlyExpenses);
                document.getElementById('monthly-installments').textContent = formatCurrency(monthlyInstallments);
                document.getElementById('monthly-total').textContent = formatCurrency(monthlyExpenses + monthlyInstallments);
                
                // æ¸²æŸ“äº¤æ˜“æ¸…å–®
                renderTransactionList(transactionList);
            }
        }

        // æª¢æŸ¥æœˆä»½æ˜¯å¦åœ¨åˆ†æœŸç¯„åœå…§
        function isMonthInInstallmentRange(currentMonth, startMonth, periods) {
            const current = new Date(currentMonth + '-01');
            const start = new Date(startMonth + '-01');
            const end = new Date(start);
            end.setMonth(end.getMonth() + periods);
            
            return current >= start && current < end;
        }

        // æ¸²æŸ“äº¤æ˜“æ¸…å–®
        function renderTransactionList(transactions) {
            const listContainer = document.getElementById('transaction-list');
            
            // æ’åºäº¤æ˜“ï¼ˆæŒ‰æ™‚é–“æˆ³é™åºï¼‰
            const sortedTransactions = transactions
                .sort((a, b) => {
                    const timeA = a.timestamp?.toMillis() || 0;
                    const timeB = b.timestamp?.toMillis() || 0;
                    return timeB - timeA;
                })
                .slice(0, 30); // åªé¡¯ç¤ºæœ€è¿‘30ç­†

            if (sortedTransactions.length === 0) {
                listContainer.innerHTML = `
                    <div class="text-center text-gray-400 py-8">
                        <p>å°šç„¡äº¤æ˜“ç´€éŒ„</p>
                    </div>
                `;
                return;
            }

            listContainer.innerHTML = sortedTransactions.map(tx => {
                const categoryIcon = getCategoryIcon(tx.category);
                const typeLabel = tx.type === 'installment' ? 'åˆ†æœŸ' : 'æ”¯å‡º';
                const typeBadgeColor = tx.type === 'installment' ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
                
                return `
                    <div class="bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-2xl">${categoryIcon}</span>
                                    <span class="text-sm font-medium text-gray-600">${tx.category}</span>
                                    <span class="text-xs px-2 py-1 rounded-full ${typeBadgeColor}">${typeLabel}</span>
                                </div>
                                <p class="text-gray-700 font-medium">${tx.description || 'ç„¡æè¿°'}</p>
                                <p class="text-xs text-gray-400 mt-1">${tx.date}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-bold text-red-500">-${formatCurrency(tx.amount)}</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ============================================
        // å·¥å…·å‡½æ•¸
        // ============================================
        function formatCurrency(amount) {
            return new Intl.NumberFormat('zh-TW', {
                style: 'currency',
                currency: 'TWD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function getCategoryIcon(category) {
            const icons = {
                'é¤é£²': 'ğŸ½ï¸',
                'äº¤é€š': 'ğŸš—',
                'å¨›æ¨‚': 'ğŸ®',
                'è³¼ç‰©': 'ğŸ›ï¸',
                'å…¶ä»–': 'ğŸ“'
            };
            return icons[category] || 'ğŸ’°';
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationMessage = document.getElementById('notification-message');
            
            notificationMessage.textContent = message;
            
            // è¨­ç½®é¡è‰²
            notification.className = 'fixed top-4 right-4 px-6 py-3 rounded-2xl shadow-lg transition-all duration-300 z-50';
            if (type === 'success') {
                notification.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                notification.classList.add('bg-red-500', 'text-white');
            } else {
                notification.classList.add('bg-blue-500', 'text-white');
            }
            
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        // ============================================
        // ç¶å®šå…¨åŸŸå‡½æ•¸åˆ° window
        // ============================================
        window.updateTotalAssets = updateTotalAssets;
        window.addExpense = addExpense;
        window.addInstallment = addInstallment;

        // è¨­ç½®é»˜èªæ—¥æœŸ
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            const expenseDateInput = document.getElementById('expense-date');
            if (expenseDateInput) {
                expenseDateInput.value = today;
            }
        });
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 50%, #80cbc4 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #78a1a1 0%, #5a8585 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(120, 161, 161, 0.4);
        }

        .input-field {
            transition: all 0.3s ease;
        }

        .input-field:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 3px rgba(120, 161, 161, 0.2);
        }

        .scroll-container {
            max-height: 600px;
            overflow-y: auto;
        }

        .scroll-container::-webkit-scrollbar {
            width: 8px;
        }

        .scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .scroll-container::-webkit-scrollbar-thumb {
            background: #78a1a1;
            border-radius: 10px;
        }

        .scroll-container::-webkit-scrollbar-thumb:hover {
            background: #5a8585;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- é€šçŸ¥çµ„ä»¶ -->
    <div id="notification" class="hidden fixed top-4 right-4 px-6 py-3 rounded-2xl shadow-lg z-50">
        <p id="notification-message" class="font-medium"></p>
    </div>

    <!-- è¼‰å…¥ä¸­ç‹€æ…‹ -->
    <div id="loading" class="flex items-center justify-center min-h-screen">
        <div class="text-center">
            <div class="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-teal-600 mb-4"></div>
            <p class="text-teal-700 font-medium text-lg">è¼‰å…¥ä¸­...</p>
        </div>
    </div>

    <!-- ä¸»è¦å…§å®¹ -->
    <div id="main-content" class="hidden max-w-7xl mx-auto">
        <!-- æ¨™é¡Œ -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-teal-800 mb-2">ğŸ’° ä¼‘é–’é¢¨å€‹äººè¨˜å¸³æœ¬</h1>
            <p class="text-teal-600">è¼•é¬†ç®¡ç†æ‚¨çš„è²¡å‹™ï¼Œè¿½è¹¤æ¯ä¸€ç­†æ”¯å‡º</p>
        </header>

        <!-- éŸ¿æ‡‰å¼ä½ˆå±€ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- å·¦å´ï¼šè³‡ç”¢ç¸½è¦½èˆ‡æœˆåº¦ç¸½è¦½ -->
            <div class="lg:col-span-1 space-y-6">
                <!-- ç¸½è³‡ç”¢å¡ç‰‡ -->
                <div class="glass-card rounded-3xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-teal-800 mb-4 flex items-center gap-2">
                        <span>ğŸ’</span>
                        <span>ç¸½è³‡ç”¢</span>
                    </h2>
                    <div class="text-center mb-6">
                        <p class="text-4xl font-bold text-teal-700" id="total-assets">$0</p>
                    </div>
                    <div class="space-y-3">
                        <input 
                            type="number" 
                            id="assets-input" 
                            placeholder="è¼¸å…¥æ–°çš„ç¸½è³‡ç”¢"
                            class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                        >
                        <button 
                            onclick="updateTotalAssets()"
                            class="btn-primary w-full py-3 rounded-2xl text-white font-medium"
                        >
                            æ›´æ–°ç¸½è³‡ç”¢
                        </button>
                    </div>
                </div>

                <!-- æœ¬æœˆæ”¯å‡ºé è¦½ -->
                <div class="glass-card rounded-3xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-teal-800 mb-4 flex items-center gap-2">
                        <span>ğŸ“Š</span>
                        <span>æœ¬æœˆæ”¯å‡ºé è¦½</span>
                    </h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">ä¸€èˆ¬æ”¯å‡º</span>
                            <span class="font-bold text-red-500" id="monthly-expenses">$0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">åˆ†æœŸæ”¤æ</span>
                            <span class="font-bold text-purple-500" id="monthly-installments">$0</span>
                        </div>
                        <div class="border-t-2 border-teal-200 pt-3 flex justify-between items-center">
                            <span class="text-lg font-bold text-teal-800">æœ¬æœˆç¸½è¨ˆ</span>
                            <span class="text-2xl font-bold text-teal-700" id="monthly-total">$0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­é–“ï¼šæ“ä½œå€ -->
            <div class="lg:col-span-1 space-y-6">
                <!-- æ–°å¢æ—¥å¸¸æ”¯å‡º -->
                <div class="glass-card rounded-3xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-teal-800 mb-4 flex items-center gap-2">
                        <span>ğŸ“</span>
                        <span>æ–°å¢æ—¥å¸¸æ”¯å‡º</span>
                    </h2>
                    <form class="space-y-4" onsubmit="event.preventDefault(); addExpense();">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æ—¥æœŸ</label>
                            <input 
                                type="date" 
                                id="expense-date" 
                                required
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é‡‘é¡</label>
                            <input 
                                type="number" 
                                id="expense-amount" 
                                placeholder="è¼¸å…¥é‡‘é¡"
                                required
                                min="0"
                                step="1"
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é¡åˆ¥</label>
                            <select 
                                id="expense-category"
                                required
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                                <option value="é¤é£²">ğŸ½ï¸ é¤é£²</option>
                                <option value="äº¤é€š">ğŸš— äº¤é€š</option>
                                <option value="å¨›æ¨‚">ğŸ® å¨›æ¨‚</option>
                                <option value="è³¼ç‰©">ğŸ›ï¸ è³¼ç‰©</option>
                                <option value="å…¶ä»–">ğŸ“ å…¶ä»–</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æè¿°</label>
                            <input 
                                type="text" 
                                id="expense-description" 
                                placeholder="é …ç›®æè¿°ï¼ˆé¸å¡«ï¼‰"
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <button 
                            type="submit"
                            class="btn-primary w-full py-3 rounded-2xl text-white font-medium"
                        >
                            æ–°å¢æ”¯å‡º
                        </button>
                    </form>
                </div>

                <!-- æ–°å¢åˆ†æœŸè¨ˆç•« -->
                <div class="glass-card rounded-3xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-teal-800 mb-4 flex items-center gap-2">
                        <span>ğŸ’³</span>
                        <span>æ–°å¢åˆ†æœŸè¨ˆç•«</span>
                    </h2>
                    <form class="space-y-4" onsubmit="event.preventDefault(); addInstallment();">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ç¸½é¡</label>
                            <input 
                                type="number" 
                                id="installment-total" 
                                placeholder="è¼¸å…¥ç¸½é‡‘é¡"
                                required
                                min="0"
                                step="1"
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æœŸæ•¸</label>
                            <input 
                                type="number" 
                                id="installment-periods" 
                                placeholder="åˆ†å¹¾æœŸ"
                                required
                                min="1"
                                step="1"
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é–‹å§‹æœˆä»½</label>
                            <input 
                                type="month" 
                                id="installment-start" 
                                required
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é¡åˆ¥</label>
                            <select 
                                id="installment-category"
                                required
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                                <option value="é¤é£²">ğŸ½ï¸ é¤é£²</option>
                                <option value="äº¤é€š">ğŸš— äº¤é€š</option>
                                <option value="å¨›æ¨‚">ğŸ® å¨›æ¨‚</option>
                                <option value="è³¼ç‰©">ğŸ›ï¸ è³¼ç‰©</option>
                                <option value="å…¶ä»–">ğŸ“ å…¶ä»–</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æè¿°</label>
                            <input 
                                type="text" 
                                id="installment-description" 
                                placeholder="é …ç›®æè¿°ï¼ˆé¸å¡«ï¼‰"
                                class="input-field w-full px-4 py-3 rounded-2xl border-2 border-teal-200 focus:border-teal-400 focus:outline-none"
                            >
                        </div>
                        <button 
                            type="submit"
                            class="btn-primary w-full py-3 rounded-2xl text-white font-medium"
                        >
                            æ–°å¢åˆ†æœŸè¨ˆç•«
                        </button>
                    </form>
                </div>
            </div>

            <!-- å³å´ï¼šäº¤æ˜“ç´€éŒ„ -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-3xl p-6 shadow-xl">
                    <h2 class="text-xl font-bold text-teal-800 mb-4 flex items-center gap-2">
                        <span>ğŸ“œ</span>
                        <span>è¿‘æœŸäº¤æ˜“ç´€éŒ„</span>
                    </h2>
                    <div id="transaction-list" class="scroll-container space-y-3">
                        <!-- äº¤æ˜“ç´€éŒ„å°‡å‹•æ…‹è¼‰å…¥ -->
                        <div class="text-center text-gray-400 py-8">
                            <p>è¼‰å…¥ä¸­...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é å°¾ -->
        <footer class="text-center mt-12 text-teal-600">
            <p class="text-sm">Â© 2025 ä¼‘é–’é¢¨å€‹äººè¨˜å¸³æœ¬ | è¼•é¬†ç®¡ç†ï¼Œç²¾å½©ç”Ÿæ´» âœ¨</p>
        </footer>
    </div>
</body>
</html>
